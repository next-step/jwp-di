# DI ν”„λ μ„μ›ν¬ κµ¬ν„
## μ§„ν–‰ λ°©λ²•
* ν”„λ μ„μ›ν¬ κµ¬ν„μ— λ€ν• μ”κµ¬μ‚¬ν•­μ„ νμ•…ν•λ‹¤.
* μ”κµ¬μ‚¬ν•­μ— λ€ν• κµ¬ν„μ„ μ™„λ£ν• ν›„ μμ‹ μ github μ•„μ΄λ””μ— ν•΄λ‹Ήν•λ” λΈλμΉμ— Pull Request(μ΄ν• PR)λ¥Ό ν†µν•΄ μ½”λ“ λ¦¬λ·° μ”μ²­μ„ ν•λ‹¤.
* μ½”λ“ λ¦¬λ·° ν”Όλ“λ°±μ— λ€ν• κ°μ„  μ‘μ—…μ„ ν•κ³  λ‹¤μ‹ PUSHν•λ‹¤.
* λ¨λ“  ν”Όλ“λ°±μ„ μ™„λ£ν•λ©΄ λ‹¤μ λ‹¨κ³„λ¥Ό λ„μ „ν•κ³  μ•μ κ³Όμ •μ„ λ°λ³µν•λ‹¤.

## μ¨λΌμΈ μ½”λ“ λ¦¬λ·° κ³Όμ •
* [ν…μ¤νΈμ™€ μ΄λ―Έμ§€λ΅ μ‚΄ν΄λ³΄λ” μ¨λΌμΈ μ½”λ“ λ¦¬λ·° κ³Όμ •](https://github.com/next-step/nextstep-docs/tree/master/codereview)

---

# π€ 1λ‹¨κ³„ - DI κµ¬ν„

### μ”κµ¬μ‚¬ν•­
> κ° ν΄λμ¤μ— λ€ν• μΈμ¤ν„΄μ¤ μƒμ„± λ° μμ΅΄κ΄€κ³„ μ„¤μ •μ„ μ• λ…Έν…μ΄μ…μΌλ΅ μλ™ν™”ν•λ‹¤.  
> μ—­ν• μ— λ§λ” `Controller, Service, Repository` μ• λ„ν…μ΄μ…μ„ μ„¤μ •ν•λ‹¤.  
> μΈμ¤ν„΄μ¤ κ°„μ μμ΅΄ κ΄€κ³„λ” `@Inject` μ• λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ‹¤.  

### μ¶”κ°€ μ”κµ¬μ‚¬ν•­
> ControllerScanμ„ μ¶”κ°€λ μ• λ„ν…μ΄μ…μ„ μ§€μ›ν•λ„λ΅ κ°μ„ ν•λ‹¤.  
> μ—­ν• μ΄ λ³€κ²½λμ—μΌλ‹ ν΄λμ¤ μ΄λ¦„λ„ BeanScannerλ΅ λ³€κ²½ν•λ‹¤.  
> AnnotationHandlerMappingμ΄ BeanFactoryμ™€ BeanScannerλ¥Ό ν™μ©ν•΄ λ™μ‘ν•λ„λ΅ λ¦¬ν©ν† λ§ ν•λ‹¤.  

### κΈ°λ¥ λ©λ΅
- [x] BeanFactoryTest μ di() ν…μ¤νΈκ°€ μ„±κ³µν•λ©΄ DI ν”„λ μ„μ›ν¬ κµ¬ν„ μ™„λ£.
  - BeanFactoryUtils ν΄λμ¤ ν™μ©
  - μΈμ¤ν„΄μ¤ μƒμ„±μ€ μ¤ν”„λ§μ BeanUtilsμ instantiateClass() λ©”μ„λ“ μ‚¬μ©κ°€λ¥
- [x] BeanFactoryUtils ν…μ¤νΈ μ½”λ“ μ‘μ„±
  - [x] getInjectedConstructor 
  - [x] findConcreteClass 
- [x] BeanFactory μ initialize κµ¬ν„
  - [x] μƒμ„±μλ΅ μ£Όμ… λ°›μ€ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ‹¤.
  - [x] μƒμ„±λ μΈμ¤ν„΄μ¤λ” νƒ€μ…μ„ ν‚¤λ΅ ν•λ” Map μ— μ €μ¥ν•λ‹¤.
  - [x] μƒμ„±μ— ν•„μ”ν• λΉμ΄ Map μ— μ—†μΌλ©΄ ν•΄λ‹Ή λΉλ„ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ‹¤.
  - [x] μƒμ„±μ— ν•„μ”ν• λΉμ΄ Map μ— μμΌλ©΄ μΈμ¤ν„΄μ¤ μƒμ„±μ— ν™μ©ν•λ‹¤.
- [x] νΉμ • μ• λ„ν…μ΄μ…μ΄ μ μ©λ ν΄λμ¤λ“¤μ„ μ°Ύλ”λ‹¤.
  - [x] μ—¬λ¬κ°μ μ• λ„ν…μ΄μ…μ„ κ°€λ³€μΈμλ΅ μ „λ‹¬ν•  μ μλ‹¤. 
- [x] ControllerScan μ—μ„ Service, Repository μ• λ„ν…μ΄μ…μ„ μ§€μ›ν•λ„λ΅ κ°μ„ 
  - [x] μ¤μΊ” λ€μƒ μ• λ…Έν…μ΄μ… μ¶”κ°€ 
- [x] ν΄λμ¤ μ΄λ¦„ λ° ν¨ν‚¤μ§€ λ³€κ²½ core.mvc.tobe.ControllerScan -> core.di.factory.BeanScanner
- [x] BeanFactoryμ™€ BeanScannerλ¥Ό ν™μ©ν•μ—¬ λ¦¬ν©ν† λ§

# π€ 2λ‹¨κ³„ - DI κµ¬ν„(ννΈ)

### 1λ‹¨κ³„ ν”Όλ“λ°±
- [x] BeanFactory: private λ©”μ„λ“λ¥Ό νΈμ¶ μμ„λ΅ μ •λ ¬
  > ν΄λ¦°μ½”λ“   
  > **μ½”λ“λ” μ‹ λ¬Έ κΈ°μ‚¬λ¥Ό μ½λ“―μ΄, μ„μ—μ„ μ•„λλ΅ μ½μ–΄ λ‚΄λ ¤κ°€λ©° μ΄ν•΄ν•  μ μμ–΄μ•Ό ν•λ‹¤.**   
  > κΈ°λ¥μ€ μ„μ—μ„λ¶€ν„° μ•„λ μμ„λ΅ μ½μ–΄λ‚΄λ¦΄ μ μκ² μ„μ λμ–΄μ•Ό ν•λ©°,   
  > λΉ„μ·ν• κΈ°λ¥μ€ μ„λ΅ κ°€κΉμ΄ ν–‰μ— λ°°μΉν•λ©΄ μ½λ” μ‚¬λμ΄ μ΄ν•΄ν•κΈ° μ‰½λ‹¤.   
- [x] BeanFactory: λ¶ν•„μ”ν• static ν‚¤μ›λ“ μ κ±°
  - IDE μλ™ μ™„μ„±μΌλ΅ μΈν• static μ¶”κ°€.. ν•­μƒ ν™•μΈν•κΈ°!
- [x] BeanFactoryUtils#findImplementedConcreteClass
  - contains λ΅μ§κΉμ§€ λ¨λ‘ λ©”μ„λ“λ΅ λ¶„λ¦¬ν•μ—¬ μ§μ ‘ λΉ„κµν•μ§€ μ•κ³  λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κΈ°.
- [x] BeanFactoryUtils: νλΌλ―Έν„°λ… λ³€κ²½ (beans -> bean) 
  - μ„ ν”Όλ“λ°± λ°μμΌλ΅ ν•΄λ‹Ήμ‚¬ν•­ μ—†μ
- [x] BeanScanner: λ³€μλ… λ³€κ²½ (controllers -> controllerTypes)
  - μΌκ΄€μ„± μ΄λ¦„μ„ μ‚¬μ©ν•΄μ•Ό μ½”λ“λ¥Ό μ½μ„ λ• νΌλ€μ„ μ¤„μΌ μ μλ‹¤
- [x] BeanFactoryUtils#getInjectedConstructor `@Inject` μ• λ„ν…μ΄μ…μ΄ 2κ° μ΄μƒ κ°μ§€λλ©΄ μμ™Έ λ°μƒ
  - API μ‚¬μ©μκ°€ μ£Όμ„μ„ μ½μ§€ μ•κ³  μ‚¬μ©ν•λ” κ²½μ°λ¥Ό λ€λΉ„ν•΄μ„ μμ™Έλ¥Ό λμ§„λ‹¤λ©΄ κ°λ° μ¤‘μ— λΉ λ¥΄κ² μΈμ§€ν•  μ μμ„ κ²ƒ κ°™λ‹¤.

--- 

# π€ 3λ‹¨κ³„ - @Configuration μ„¤μ •

### μ”κµ¬μ‚¬ν•­
- `@Configuration` μ• λ„ν…μ΄μ…μ„ μ„¤μ •μ© μλ°” ν΄λμ¤ νμΌμ„μ„ λ…μ‹ν•λ‹¤.
- `@Configuration` μ• λ„ν…μ΄μ…μ΄ μ μ©λ ν΄λμ¤μ—μ„ BeanFactory μ— Bean μΌλ΅ λ“±λ΅ν•λ” λ©”μ„λ“λ” `@Bean` μ• λ„ν…μ΄μ…μ„ μ μ©ν•λ‹¤.
- `@ComponentScan` μ• λ„ν…μ΄μ…μ„ ν™μ©ν•΄ BeanScanner μ—μ„ μ μ©ν•  ν¨ν‚¤μ§€λ¥Ό μ°Ύλ”λ‹¤.
- `@Configuration` μ„¤μ • νμΌμ„ ν†µν•΄ λ“±λ΅ν• λΉκ³Ό BeanScanner λ¥Ό ν†µν•΄ λ“±λ΅ λΉ μƒνΈ κ°„μ—λ„ DIκ°€ κ°€λ¥ν•΄μ•Ό ν•λ‹¤.

### κΈ°λ¥λ©λ΅
- [x] ReflectionUtils invokeMethod λ©”μ„λ“ μ¶”κ°€
  - λ©”μ„λ“λ¥Ό μ‹¤ν–‰ν•  μΈμ¤ν„΄μ¤, λ©”μ„λ“, λ©”μ„λ“ μ‹¤ν–‰μ— ν•„μ”ν• νλΌλ―Έν„°λ¥Ό μ „λ‹¬ν•μ—¬ λ©”μ„λ“λ¥Ό μ‹¤ν–‰ν• κ²°κ³Όλ¥Ό λ°ν™ν•λ‹¤.
- [ ] BeanFactory κ°μ²΄λ¥Ό λ―Έλ¦¬ μƒμ„±ν•΄λ‘”λ‹¤.
  - κΈ°μ΅΄μ BeanScanner μ™€ ConfigurationBeanScanner λ΅ μ°Ύμ€ λΉμ„ ν•λ‚μ BeanFactory μ—μ„ κ΄€λ¦¬ν•κΈ° μ„ν•¨.
- [x] νΉμ • ν¨ν‚¤μ§€λ‚΄μ—μ„ `@Configuration` μ• λ„ν…μ΄μ…μ΄ μ μ©λ ν΄λμ¤λ¥Ό μ°Ύλ”λ‹¤.
  - [x] `@Configuration` μ• λ„ν…μ΄μ…μ΄ μ μ©λ ν΄λμ¤μ—μ„ `@Bean` μ• λ„ν…μ΄μ…μ΄ μ μ©λ λ©”μ„λ“λ¥Ό μ°Ύλ”λ‹¤.
    - [x] scan λ©”μ„λ“λ¥Ό νΈμ¶ν•  λ• BeanFactory λ¥Ό μ£Όμ…ν•μ—¬ BeanFactory μ— μƒμ„±λ λΉμ„ λ“±λ΅ν•λ‹¤.
      - [x] νλΌλ―Έν„°μ μκ°€ μ μ€ μμΌλ΅ λΉμ„ μƒμ„±ν•λ‹¤.
        - μν™ μ°Έμ΅°λ΅ μΈν•΄ λΉμ„ μƒμ„±ν•  μ μ—†λ” κ²½μ°κ°€ μƒκΈ°κΈ° λ•λ¬Έμ— μμ΅΄μ„±μ΄ κ°€μ¥ λ‚®μ€ λΉλ¶€ν„° μƒμ„±ν•λ‹¤.
      - [x] λ©”μ„λ“μ νλΌλ―Έν„°κ°€ μ—†μΌλ©΄ λ©”μ„λ“λ¥Ό μ‹¤ν–‰ μ‹ν‚¤κ³  λ©”μ„λ“λ…μ„ key, λ¦¬ν„΄λ μΈμ¤ν„΄μ¤λ¥Ό value λ΅ BeanFactory μ— λ“±λ΅ν•λ‹¤.
      - [x] λ©”μ„λ“μ νλΌλ―Έν„°κ°€ μμΌλ©΄ λ©”μ„λ“λ¥Ό μ‹¤ν–‰ μ‹ν‚¤κΈ° μ „μ— νλΌλ―Έν„°λ¥Ό BeanFactory μ—μ„ μ°Ύμ•„μ„ μ£Όμ…ν•λ‹¤.
- [x] νΉμ • ν¨ν‚¤μ§€μ ν•μ„ μ „μ²΄ ν¨ν‚¤μ§€μ—μ„ `@ComponentScan` μ• λ„ν…μ΄μ…μ΄ μ μ©λ ν΄λμ¤λ¥Ό μ°Ύλ”λ‹¤.
  - [x] `@ComponentScan` μ• λ„ν…μ΄μ…μ— μ„¤μ •λ `basePackages` κ°’μ„ μ½λ”λ‹¤. 
- [ ] `@ComponentScan` μ κ°’(ν¨ν‚¤μ§€ κ²½λ΅λ“¤)μ„ BeanScanner λ¥Ό ν†µν•΄ λΉμ„ μƒμ„±ν•λ‹¤.
  - [ ] scan λ©”μ„λ“λ¥Ό νΈμ¶ν•  λ• BeanFactory λ¥Ό μ£Όμ…ν•μ—¬ BeanFactory μ— μƒμ„±λ λΉμ„ λ“±λ΅ν•λ‹¤.
- [ ] BeanScanner, ConfigurationBeanScanner λ΅ λΉμ„ μ°Ύμ•„ λ“±λ΅ν•λ” μΌμ„ μ²λ¦¬ν•  κ°μ²΄λ¥Ό λ„μ¶ν•λ‹¤.
- [ ] AnnotationHandlerMapping μ—μ„ BeanScanner λ¥Ό μ§μ ‘ μμ΅΄ν•μ§€ μ•κ³  μ„μ—μ„ λ§λ“  κ°μ²΄μ— μμ΅΄ν•μ—¬ handlerExecutions λ¥Ό μ΄κΈ°ν™”ν•  μ μλ„λ΅ ν•λ‹¤.
